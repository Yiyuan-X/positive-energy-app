{"version":3,"file":"static/js/25.bf31cf67.chunk.js","mappings":"8ynDAiDe,SAASA,EAAUC,GAAgB,IAAf,SAAEC,GAAUD,EAC7C,MAAOE,EAAWC,IAAgBC,EAAAA,EAAAA,UAAS,KACpCC,EAAMC,IAAWF,EAAAA,EAAAA,UAAS,IAC1BG,EAAQC,IAAaJ,EAAAA,EAAAA,UAAS,CAAC,IAC/BK,EAAQC,IAAaN,EAAAA,EAAAA,UAAS,OAGrCO,EAAAA,EAAAA,WAAU,KACR,MAAMC,GAAW,IAAIC,MAAOC,cAAcC,MAAM,KAAK,GAC/CC,EAAQ,cAAAC,OAAiBL,GACzBM,EAASC,aAAaC,QAAQJ,GACpC,GAAIE,EACFf,EAAakB,KAAKC,MAAMJ,QACnB,CACL,MAAMK,EAzDZ,WAAyC,IAAbC,EAAKC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAClC,OAAOG,EAAcC,KAAK,IAAM,GAAMC,KAAKC,UAAUC,MAAM,EAAGR,EAChE,CAuDuBS,CAAmB,IACpC9B,EAAaoB,GACbJ,aAAae,QAAQlB,EAAUK,KAAKc,UAAUZ,GAChD,GACC,IAGH,MAYMa,EAAiBC,UAAwB,IAADC,EAAAC,EAAAC,EAAAC,EAC5C,MAAMC,EAASC,OAAOC,QAAQC,GAAahB,KAAK,CAACiB,EAAGC,IAAMA,EAAE,GAAKD,EAAE,IAC7DE,GAAmB,QAATV,EAAAI,EAAO,UAAE,IAAAJ,OAAA,EAATA,EAAY,KAAM,iCAC5BW,EAAyB,QAAjBV,EAAY,QAAZC,EAAGE,EAAO,UAAE,IAAAF,OAAA,EAATA,EAAY,UAAE,IAAAD,EAAAA,EAAI,EAC7BW,EAAkB,QAAZT,EAAGC,EAAO,UAAE,IAAAD,OAAA,EAATA,EAAY,GACrBU,EAAaR,OAAOS,OAAOP,GAAaQ,OAAO,CAACP,EAAGC,IAAMD,EAAIC,EAAG,GAEtE,IAAIO,EAAYN,EACZE,GAAUD,EAAWJ,EAAYK,IAAW,IAC9CI,EAAS,GAAArC,OAAM+B,EAAO,OAAA/B,OAAMiC,EAAM,wBAEpC,MAAMK,EAlFV,SAA8BC,GAC5B,MAAMC,EAAU,CACd,qBAAM,4iCAMN,qBAAM,s/BAMN,qBAAM,w9BAMN,qBAAM,o5BAON,iCAAQ,2iCAQV,OAAOA,EAAQD,IAASC,EAAQ,iCAClC,CA8CwBC,CAAqBV,GAEzCtC,EADoB,CAAE8C,KAAMF,EAAWK,MAAOR,EAAYI,gBAI1D,IACE,MAAMK,EAAOvC,KAAKC,MAAMH,aAAaC,QAAQ,SAAW,cAClDyC,EAAAA,EAASC,KAAK,uBAAuBC,OAAO,CAChDC,YAAgB,OAAJJ,QAAI,IAAJA,OAAI,EAAJA,EAAMK,QAAS,KAC3BT,KAAMF,EACNK,MAAOR,EACPI,eAEJ,CAAE,MAAOW,GACPC,QAAQC,MAAM,oDAAaF,EAC7B,GAIF,GAAIzD,EACF,OACE4D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,MAAA,MAAAE,SAAA,CAAI,sEAAa9D,EAAO+C,SACxBgB,EAAAA,EAAAA,KAAA,KAAGF,UAAU,cAAaC,SAAE9D,EAAO8C,eACnCc,EAAAA,EAAAA,MAAA,KAAGC,UAAU,eAAcC,SAAA,CAAC,8CAAS9D,EAAOkD,MAAM,YAClDa,EAAAA,EAAAA,KAAA,UACEC,QAASA,IACPxE,EAAWA,EAAS,QAAWyE,OAAOC,SAASC,KAAO,IACvDL,SACF,gCAQP,GAAyB,IAArBrE,EAAUwB,OAAc,OAAO8C,EAAAA,EAAAA,KAAA,KAAAD,SAAG,sCAGtC,MAAMM,EAAI3E,EAAUG,GAEpB,OACEgE,EAAAA,EAAAA,MAAA,OAAKC,UAAU,cAAaC,SAAA,EAC1BC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,uDACJC,EAAAA,EAAAA,KAAA,KAAAD,SAAIM,EAAEC,YACNN,EAAAA,EAAAA,KAAA,OAAKF,UAAU,UAASC,SACrBM,EAAEE,QAAQC,IAAI,CAACC,EAAKC,KACnBV,EAAAA,EAAAA,KAAA,UAAkBC,QAASA,IAvEbjB,KACpB,MAAM2B,GAASC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQ7E,GAAM,IAAE,CAACiD,IAAQjD,EAAOiD,IAAS,GAAK,IAC7DhD,EAAU2E,GAEN9E,EAAO,EAAIH,EAAUwB,OACvBpB,EAAQD,EAAO,GAEf+B,EAAe+C,IAgEsBE,CAAaJ,EAAIzB,MAAMe,SACrDU,EAAIK,MADMJ,OAKjBb,EAAAA,EAAAA,MAAA,KAAAE,SAAA,CAAG,qBAAIlE,EAAO,EAAE,MAAIH,EAAUwB,YAGpC,C","sources":["components/TalentTest.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { supabase } from \"../lib/supabaseClient\";\r\nimport fullQuestions from \"../data/talentQuestions.json\";\r\nimport \"./TalentTest.css\";\r\n\r\n// âœ… éšæœºæŠ½é¢˜\r\nfunction getRandomQuestions(count = 10) {\r\n  return fullQuestions.sort(() => 0.5 - Math.random()).slice(0, count);\r\n}\r\n\r\n// âœ… å¤©èµ‹ç±»å‹è¯´æ˜\r\nfunction getTalentDescription(type) {\r\n  const descMap = {\r\n    \"åˆ›é€ åŠ›\": `ğŸŒˆ **åˆ›é€ åŠ›å‹**  \r\nä½ æ˜¯å¤©ç”Ÿçš„çµæ„Ÿåˆ¶é€ æœºï¼Œèƒ½åœ¨æ—¥å¸¸ä¸­å‘ç°æ–°å¥‡ä¸æ„ä¹‰ã€‚ä½ çš„æƒ³è±¡åŠ›æ•é”ï¼Œæ€ç»´è·³è·ƒï¼Œå–œæ¬¢æ‰“ç ´æ¡†æ¶ä¸è§„åˆ™ï¼Œæ¢ç´¢ä¸åŒçš„å¯èƒ½æ€§ã€‚  \r\nä½ é€‚åˆä»äº‹å†…å®¹åˆ›ä½œã€è‰ºæœ¯è®¾è®¡ã€åˆ›æ–°è¥é”€ã€å‘æ˜å¼€å‘ç­‰éœ€è¦çµæ„Ÿçš„é¢†åŸŸã€‚  \r\nä¸è¿‡ï¼Œä½ ä¹Ÿå¯èƒ½åœ¨æ‰§è¡Œé˜¶æ®µåˆ†å¿ƒæˆ–ç¼ºä¹è€å¿ƒã€‚å»ºè®®å­¦ä¼šä¸ºçµæ„Ÿå»ºç«‹â€œç»“æ„â€ï¼Œè®¾å®šé˜¶æ®µç›®æ ‡ï¼Œå°†åˆ›æ„è½åœ°ä¸ºæˆæœã€‚  \r\nå½“ä½ èƒ½å¹³è¡¡è‡ªç”±ä¸èšç„¦ï¼Œä½ çš„åˆ›é€ åŠ›å°†æˆä¸ºä¸–ç•Œç¨€ç¼ºçš„çµé­‚èµ„äº§ã€‚`,\r\n\r\n    \"é€»è¾‘åŠ›\": `ğŸ§  **é€»è¾‘åˆ†æå‹**  \r\nä½ æ‹¥æœ‰å†·é™è€Œç²¾å‡†çš„æ€ç»´ç³»ç»Ÿï¼Œæ˜¯ç†æ€§ä¸æ•ˆç‡çš„ä»£è¨€äººã€‚ä½ æ“…é•¿æ¨ç†ã€åˆ†æä¸æ€»ç»“ï¼Œèƒ½åœ¨æ··ä¹±ä¸­å»ºç«‹ç§©åºï¼Œå¿«é€Ÿè¯†åˆ«é—®é¢˜æœ¬è´¨ã€‚  \r\né€‚åˆé¢†åŸŸåŒ…æ‹¬ç§‘æŠ€å·¥ç¨‹ã€ç¼–ç¨‹ã€é‡‘èåˆ†æã€æˆ˜ç•¥è§„åˆ’ç­‰éœ€è¦åˆ¤æ–­åŠ›çš„æ–¹å‘ã€‚  \r\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç†æ€§è‹¥ç¼ºä¹æŸ”è½¯ï¼Œä¼šè®©å…³ç³»å˜å¾—ç–ç¦»ã€‚å»ºè®®ä½ è®©â€œé€»è¾‘â€ä¸â€œæ„Ÿå—â€å¹¶è¡Œï¼Œå­¦ä¼šè†å¬å†…å¿ƒã€‚  \r\nå½“ç†æ™ºèå…¥æ¸©åº¦ï¼Œä½ çš„æ™ºæ…§ä¼šæ›´å…·åŠ›é‡ä¸å½±å“åŠ›ã€‚`,\r\n\r\n    \"é¢†å¯¼åŠ›\": `ğŸ”¥ **é¢†å¯¼é©±åŠ¨å‹**  \r\nä½ å…·å¤‡å¼ºå¤§çš„å·å¬åŠ›ä¸ç›®æ ‡å¯¼å‘æ€ç»´ï¼Œå–„äºå¸¦é¢†ä»–äººã€å‡èšåŠ›é‡å¹¶å®ç°ç›®æ ‡ã€‚ä½ æ“…é•¿åˆ¶å®šæ–¹å‘ä¸æ¿€åŠ±å›¢é˜Ÿï¼Œæ˜¯å¤©ç”Ÿçš„å¼•é¢†è€…ã€‚  \r\nä½ åœ¨å±æœºä¸­ä»èƒ½ä¿æŒæ¸…æ™°ï¼Œå‹‡äºå†³ç­–ä¸æ‰¿æ‹…è´£ä»»ã€‚  \r\nä½†é¢†å¯¼å¹¶éæ§åˆ¶ï¼Œè€Œæ˜¯è®©ä»–äººä¹Ÿèƒ½é—ªå…‰ã€‚å»ºè®®ä½ å¤šç»ƒä¹ å€¾å¬ï¼Œç†è§£ä»–äººçš„èŠ‚å¥ä¸æƒ…æ„Ÿã€‚  \r\nå½“ä½ ç”¨ä¿¡ä»»ä»£æ›¿å‘½ä»¤ï¼Œç”¨æ„¿æ™¯ä»£æ›¿æŒ‡ä»¤ï¼Œä½ ä¼šæˆä¸ºè®©äººå¿ƒæ‚¦è¯šæœçš„â€œèµ‹èƒ½å‹é¢†å¯¼è€…â€ã€‚`,\r\n\r\n    \"å…±æƒ…åŠ›\": `ğŸ’ **å…±æƒ…æ²»æ„ˆå‹**  \r\nä½ æƒ…æ„Ÿä¸°å¯Œã€æ„Ÿå—åŠ›ç»†è…»ï¼Œèƒ½è½»æ˜“å¯Ÿè§‰ä»–äººæƒ…ç»ªï¼Œæ˜¯å¤©ç”Ÿçš„â€œå¿ƒçµé•œå­â€ã€‚  \r\nä½ æ“…é•¿æ”¯æŒã€å€¾å¬ä¸å®‰æŠšä»–äººï¼Œåœ¨å¿ƒç†ã€æ•™è‚²ã€è‰ºæœ¯ã€è¾…å¯¼ç­‰é¢†åŸŸä¼šå¤§æ”¾å¼‚å½©ã€‚  \r\nä½†è¦è®°å¾—ï¼šå…±æƒ…ä¸æ˜¯ç‰ºç‰²ã€‚è¿‡åº¦æ„Ÿå—ä»–äººç—›è‹¦å¯èƒ½è®©ä½ æƒ…ç»ªè€—ç«­ã€‚  \r\nå­¦ä¼šè®¾å®šç•Œé™ã€ç…§é¡¾è‡ªå·±ï¼Œæ˜¯æŒç»­ç»™äºˆçš„å‰æã€‚  \r\nå½“ä½ æ—¢æŸ”è½¯åˆç¨³å›ºæ—¶ï¼Œä½ çš„èƒ½é‡èƒ½æ²»æ„ˆèº«è¾¹æ‰€æœ‰äººã€‚`,\r\n\r\n    \"å¤šå…ƒèåˆå‹\": `ğŸ’« **å¤šå…ƒèåˆå‹å¤©èµ‹**  \r\nä½ å…¼å…·ç†æ€§ã€åˆ›é€ ã€æƒ…æ„Ÿä¸æ´å¯Ÿï¼Œæ˜¯å¤åˆå‹æ€ç»´è€…ã€‚ä½ ä¸å®¹æ˜“è¢«å•ä¸€è§’è‰²å®šä¹‰ï¼Œè€Œæ“…é•¿åœ¨è·¨ç•Œä¸­æ‰¾åˆ°ç‹¬ç‰¹ä»·å€¼ã€‚  \r\nä½ å¯èƒ½åŒæ—¶æ‹¥æœ‰â€œé€»è¾‘åŠ› + åˆ›é€ åŠ›â€æˆ–â€œå…±æƒ…åŠ› + é¢†å¯¼åŠ›â€ç­‰ç‰¹è´¨ã€‚  \r\nä½ çš„å­¦ä¹ ä¸æˆé•¿æ–¹å¼åƒèºæ—‹ä¸Šå‡ï¼Œé€šè¿‡å¤šç»´åº¦ä½“éªŒé€æ¸æ•´åˆæˆæ·±å±‚æ™ºæ…§ã€‚  \r\nå»ºè®®ä½ æŒç»­æ¢ç´¢ï¼Œä¸æ€¥äºå®šå‹ï¼Œè®©å¤šé‡å¤©èµ‹äº’ç›¸æ»‹å…»ã€‚  \r\nå½“ä½ èƒ½æ•´åˆå®ƒä»¬æœåŠ¡äºæ¸…æ™°ç›®æ ‡ï¼Œä½ å°†æˆä¸ºçœŸæ­£çš„â€œè·¨ç•Œåˆ›é€ è€…â€ã€‚`,\r\n  };\r\n\r\n  return descMap[type] || descMap[\"å¤šå…ƒèåˆå‹\"];\r\n}\r\n\r\nexport default function TalentTest({ onFinish }) {\r\n  const [questions, setQuestions] = useState([]);\r\n  const [step, setStep] = useState(0);\r\n  const [scores, setScores] = useState({});\r\n  const [result, setResult] = useState(null);\r\n\r\n  // âœ… åˆå§‹åŒ–é¢˜åº“ï¼ˆæ¯æ—¥éšæœºç¼“å­˜ï¼‰\r\n  useEffect(() => {\r\n    const todayKey = new Date().toISOString().split(\"T\")[0];\r\n    const cacheKey = `talentTest_${todayKey}`;\r\n    const cached = localStorage.getItem(cacheKey);\r\n    if (cached) {\r\n      setQuestions(JSON.parse(cached));\r\n    } else {\r\n      const selected = getRandomQuestions(10);\r\n      setQuestions(selected);\r\n      localStorage.setItem(cacheKey, JSON.stringify(selected));\r\n    }\r\n  }, []);\r\n\r\n  // âœ… ç­”é¢˜é€»è¾‘\r\n  const handleAnswer = (type) => {\r\n    const newScores = { ...scores, [type]: (scores[type] || 0) + 1 };\r\n    setScores(newScores);\r\n\r\n    if (step + 1 < questions.length) {\r\n      setStep(step + 1);\r\n    } else {\r\n      generateResult(newScores); // âœ… ç¡®ä¿ä½¿ç”¨æœ€æ–°åˆ†æ•°\r\n    }\r\n  };\r\n\r\n  // âœ… ç”Ÿæˆç»“æœï¼ˆåˆå¹¶ç‰ˆï¼‰\r\n  const generateResult = async (finalScores) => {\r\n    const sorted = Object.entries(finalScores).sort((a, b) => b[1] - a[1]);\r\n    const topType = sorted[0]?.[0] || \"å¤šå…ƒèåˆå‹\";\r\n    const topScore = sorted[0]?.[1] ?? 0;\r\n    const second = sorted[1]?.[0];\r\n    const totalScore = Object.values(finalScores).reduce((a, b) => a + b, 0);\r\n\r\n    let typeLabel = topType;\r\n    if (second && topScore - finalScores[second] <= 1)\r\n      typeLabel = `${topType} + ${second} å¤åˆå‹`;\r\n\r\n    const description = getTalentDescription(topType);\r\n    const finalResult = { type: typeLabel, score: totalScore, description };\r\n    setResult(finalResult);\r\n\r\n    // âœ… å†™å…¥ Supabase æ•°æ®åº“\r\n    try {\r\n      const user = JSON.parse(localStorage.getItem(\"user\") || \"null\");\r\n      await supabase.from(\"talent_test_results\").insert({\r\n        user_email: user?.email || null,\r\n        type: typeLabel,\r\n        score: totalScore,\r\n        description,\r\n      });\r\n    } catch (err) {\r\n      console.error(\"âš ï¸ æ•°æ®å†™å…¥å¤±è´¥\", err);\r\n    }\r\n  };\r\n\r\n  // âœ… æ¸²æŸ“ç»“æœ\r\n  if (result) {\r\n    return (\r\n      <div className=\"talent-result\">\r\n        <h2>ğŸ§¬ å…³äºä½ çš„å¤©èµ‹ç±»å‹ï¼š{result.type}</h2>\r\n        <p className=\"talent-desc\">{result.description}</p>\r\n        <p className=\"talent-score\">ğŸ¯ æµ‹è¯•å¾—åˆ†ï¼š{result.score} / 10</p>\r\n        <button\r\n          onClick={() =>\r\n            onFinish ? onFinish(\"home\") : (window.location.href = \"/\")\r\n          }\r\n        >\r\n          è¿”å›ä¸»é¡µ\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // âœ… åŠ è½½ä¸­æç¤º\r\n  if (questions.length === 0) return <p>é¢˜ç›®åŠ è½½ä¸­...</p>;\r\n\r\n  // âœ… å½“å‰é¢˜ç›®\r\n  const q = questions[step];\r\n\r\n  return (\r\n    <div className=\"talent-test\">\r\n      <h2>ğŸŒŸ è¶…å¼ºå¤©èµ‹æµ‹è¯•</h2>\r\n      <p>{q.question}</p>\r\n      <div className=\"options\">\r\n        {q.options.map((opt, idx) => (\r\n          <button key={idx} onClick={() => handleAnswer(opt.type)}>\r\n            {opt.text}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      <p>è¿›åº¦ï¼š{step + 1} / {questions.length}</p>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["TalentTest","_ref","onFinish","questions","setQuestions","useState","step","setStep","scores","setScores","result","setResult","useEffect","todayKey","Date","toISOString","split","cacheKey","concat","cached","localStorage","getItem","JSON","parse","selected","count","arguments","length","undefined","fullQuestions","sort","Math","random","slice","getRandomQuestions","setItem","stringify","generateResult","async","_sorted$","_sorted$0$","_sorted$2","_sorted$3","sorted","Object","entries","finalScores","a","b","topType","topScore","second","totalScore","values","reduce","typeLabel","description","type","descMap","getTalentDescription","score","user","supabase","from","insert","user_email","email","err","console","error","_jsxs","className","children","_jsx","onClick","window","location","href","q","question","options","map","opt","idx","newScores","_objectSpread","handleAnswer","text"],"sourceRoot":""}